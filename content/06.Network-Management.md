# Network Management 
Network management is a critical skill for any computer specialist. Whether you want to analyze a network or interact with web servers, Linux provides a rich set of command-line tools for managing, analyzing, and troubleshooting network connectivity.

## Connectivity and Packet Analysis Commands
### 1. Network Connectivity
### `ping`
The `ping` command is used to check the connectivity and reachability of a host in the network. It operates by sending packets (ICMP echo packets) to a host and waits for a response (echo reply).

Example
```
ping google.com 
```

Expected output
```
PING google.com (172.217.171.238) 56(84) bytes of data.
64 bytes from wms90z07-in-f14.1e100.net (172.217.171.238): icmp_seq=1 ttl=255 time=118 ms
64 bytes from wms90z07-in-f14.1e100.net (172.217.171.238): icmp_seq=2 ttl=255 time=129 ms
64 bytes from wms90z07-in-f14.1e100.net (172.217.171.238): icmp_seq=3 ttl=255 time=119 ms
64 bytes from wms90z07-in-f14.1e100.net (172.217.171.238): icmp_seq=4 ttl=255 time=120 ms
64 bytes from wms90z07-in-f14.1e100.net (172.217.171.238): icmp_seq=5 ttl=255 time=116 ms
```
The output indicates a successful connection to google.com. The most crucial data to extract from the output is the `time`, which represents the round-trip time taken for the packet to reach the destination and return. This value is important for assessing network latency and performance.

On most systems, ping sends packets continuously until interrupted (e.g., using `ctrl + c`). To specify a count, you can use the `-c` option.

Example 
```
ping -c 4 google.com
```

Output
```
PING google.com
56(84) bytes of data.
64 bytes from mad01525-in-f206.1e100.net (216.58.211.206): icmp_seq=1 ttl=255 time=82.3 ms
64 bytes from mad01525-in-f206.1e100.net (216.58.211.206): icmp_seq=2 ttl=255 time=16 ms
64 bytes from mad01525-in-f206.1e100.net (216.58.211.206): icmp_seq=3 ttl=255 time=17 ms
64 bytes from mad01525-in-f206.1e100.net (216.58.211.206): icmp_seq=4 ttl=255 time=20.8 ms

--- google.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3003ms
rtt min/avg/max/mdev = 82.330/115.573/137.392/20.830 ms
```

### 2. Tracing Network Paths
### `traceroute`
The `traceroute` is a command-line network diagnostic tool used to track the path packets take from your computer to a destination server or host.

Example
```
traceroute google.com
```
- This command prints each hop between your device and Google’s servers.

Expected output
```
traceroute to google.com (172.217.171.238), 64 hops max, 40 byte packets
 1  10.20.43.254 (10.20.43.254)  5.971 ms  5.010 ms  5.221 ms
 2  10.60.1.253 (10.60.1.253)  4.569 ms  5.420 ms  8.871 ms
 3  37.224.52.17 (37.224.52.17)  10.784 ms  6.008 ms  10.439 ms
 4  10.188.193.18 (10.188.193.18)  8.941 ms
    10.188.193.40 (10.188.193.40)  7.848 ms
    10.188.193.18 (10.188.193.18)  9.864 ms
 5  10.188.193.23 (10.188.193.23)  18.238 ms  10.372 ms
    10.188.193.45 (10.188.193.45)  10.914 ms
 6  10.188.195.73 (10.188.195.73)  22.869 ms  60.992 ms  21.646 ms
 7  72.14.213.158 (72.14.213.158)  94.631 ms
    72.14.211.158 (72.14.211.158)  80.638 ms
    72.14.213.158 (72.14.213.158)  92.008 ms
 8  * * 108.170.255.153 (108.170.255.153)  80.813 ms
 9  72.14.237.92 (72.14.237.92)  91.869 ms
    216.239.48.138 (216.239.48.138)  86.540 ms
    142.251.49.132 (142.251.49.132)  84.174 ms
10  * 192.178.109.237 (192.178.109.237)  89.809 ms
    192.178.104.28 (192.178.104.28)  86.006 ms
11  216.239.35.206 (216.239.35.206)  82.265 ms  152.867 ms *
12  216.239.35.206 (216.239.35.206)  80.481 ms
    72.14.234.190 (72.14.234.190)  154.670 ms
    192.178.85.28 (192.178.85.28)  78.710 ms
13  72.14.234.190 (72.14.234.190)  92.528 ms
    192.178.105.81 (192.178.105.81)  158.446 ms  79.688 ms
14  192.178.105.13 (192.178.105.13)  81.383 ms  168.890 ms  80.418 ms
15  mrs09s07-in-f14.1e100.net (172.217.171.238)  68.406 ms  79.349 ms
    172.253.67.151 (172.253.67.151)  90.800 ms
```
- Each line shows the hop number, the hostname or IP address, and round-trip times for three packet attempts.
- An asterisk `*` indicates a packet was lost or the router did not respond within the timeout.

> [!NOTE]
> `traceroute` offers various options to customize its behavior to learn about it, read [traceroute Command](https://www.ibm.com/docs/en/aix/7.3.0?topic=t-traceroute-command).

## Network Management Commands


### 1. Host Management

### `hostname`
Displays the name of the current host (computer) on the **local network**. 
#### Example
```bash
hostname
```
#### Expected Output
```bash
MacBook-Pro-2.local
```

**`hostname`** can also set a new hostname for the system using the following command.

#### Example
```bash
sudo hostname my-new-hostname
```
This will change the hostname to be **my-new-hostname** temporarily until the next reboot.

### 2. Internet Protocol Management

### `ip` 
Used to show and manipulate routing, devices, policy routing, and tunnels. It has numerous options and subcommands. The primary categories of options available are mentioned and explained below.

### Address Management
`addr`    
Options: `add`, `del`, `show`, `flush`.
| Command                          | Explanation                                                                                          |
|----------------------------------|------------------------------------------------------------------------------------------------------|
| `ip addr show` | Displays the current IP address configuration of all network interfaces.                            |
| `ip addr add 192.168.1.20/24 dev eth0` | Assigns a new IP address (`192.168.1.20`) to the specified device (`eth0`).                      |
| `ip addr del 192.168.1.20/24 dev eth0` | Removes the specified IP address (`192.168.1.20`) from the specified device (`eth0`).          |
| `ip addr flush dev eth0` | Removes all IP addresses assigned to the specified device (`eth0`).                                 |

#### Example 
```bash
ip addr show
```
#### Expected output
```bash
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc fq_codel state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:1a:2b:3c:4d:5e brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.10/24 brd 192.168.1.255 scope global dynamic eth0
       valid_lft 86399sec preferred_lft 86399sec
```
| Interface | Description                                                                                     |
|-----------|-------------------------------------------------------------------------------------------------|
| **1: lo** | Indicates the loopback interface (`lo`), used for internal communication within the host.     |
|           | **<LOOPBACK,UP,LOWER_UP>**: Interface flags indicating it is a loopback interface and is active. |
|           | **mtu 65536**: Maximum transmission unit size.                                                |
|           | **link/loopback 00:00:00:00:00:00**: MAC address of the loopback interface.                   |
|           | **inet 127.0.0.1/8**: IPv4 address with subnet mask.                                         |
|           | **valid_lft forever preferred_lft forever**: Address lifetime information.                    |
| **2: eth0** | This is the first Ethernet interface on the machine.                                          |
|           | **<BROADCAST,MULTICAST,UP,LOWER_UP>**: Indicates it can send broadcast and multicast messages and is active. |
|           | **link/ether 00:1a:2b:3c:4d:5e**: MAC address of the Ethernet interface.                       |
|           | **inet 192.168.1.10/24**: The assigned IPv4 address with subnet mask.                        |
|           | **brd 192.168.1.255**: Broadcast address for the subnet.                                     |
|           | **scope global dynamic**: Indicates it's a globally routable address and dynamically assigned. |
|           | **valid_lft 86399sec preferred_lft 86399sec**: Address lifetime information.                  |

### Route Management
`route`    
Options: `add`, `del`, `show`, `change`.

| Command                                      | Explanation                                                                                     |
|----------------------------------------------|-------------------------------------------------------------------------------------------------|
| `ip route show` | Displays the current routing table for the system.                                            |
| `ip route add 10.0.0.0/24 via 192.168.1.1` | Adds a new route for the subnet `10.0.0.0/24`, directing traffic through the gateway `192.168.1.1`. |
| `ip route del 10.0.0.0/24` | Removes the specified route for the subnet `10.0.0.0/24` from the routing table.             |
| `ip route change 192.168.1.0/24 via 192.168.1.1` | Modifies an existing route for the subnet `192.168.1.0/24`, directing traffic through the gateway `192.168.1.1`. |
#### Example 
```bash
ip route show
```
#### Expected output
```bash
default via 192.168.1.1 dev eth0 
192.168.1.0/24 dev eth0  proto kernel  scope link  src 192.168.1.10
```
| Route Information                                      | Explanation                                                                                      |
|-------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| **default via 192.168.1.1 dev eth0** | Indicates the default route for packets that do not match any other routes, sent to the gateway at `192.168.1.1` using the `eth0` interface. |
| **192.168.1.0/24 dev eth0** | Indicates a specific route for the subnet `192.168.1.0` with a subnet mask of `/24`.           |
| **dev eth0** | Indicates that this route is associated with the `eth0` interface.                             |
| **proto kernel** | Means the route was created by the kernel (automatically).                                     |
| **scope link** | Indicates that the route is directly reachable on the local network.                           |
| **src 192.168.1.10** | The source IP address used for outgoing packets on this subnet.                                |

### Link Management
`link`    
Options: `set`, `show`.
| Command                           | Explanation                                                                                      |
|-----------------------------------|--------------------------------------------------------------------------------------------------|
| `ip link show` | Displays the current status and configuration of all network interfaces on the system.         |
| `ip link set eth0 up` | Activates the specified interface (`eth0`), enabling it to send and receive packets.           |
| `ip link set eth0 down` | Deactivates the specified interface (`eth0`), preventing it from sending and receiving packets. |

#### Example 
```bash
ip link show
```
#### Expected output
```bash
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc fq_codel state UNKNOWN group default qlen 1000
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
```

### Neighbor Management
`neigh`    
Options: `show`, `add`.
| Command                          | Explanation                                                                                     |
|----------------------------------|-------------------------------------------------------------------------------------------------|
| `ip neigh show` | Displays the current ARP table, showing the mapping of IP addresses to MAC addresses for devices on the local network. |
| `ip neigh add 192.168.1.20 lladdr 00:1a:2b:3c:4d:60 dev eth0 nud permanent` | Adds a static ARP entry for the specified IP address (`192.168.1.20`) and MAC address (`00:1a:2b:3c:4d:60`), associating it with the `eth0` interface. The entry is set to be permanent. |
#### Example 
```bash
ip neigh show
```
#### Expected output
```bash
192.168.1.1 dev eth0 lladdr 00:1a:2b:3c:4d:5e REACHABLE
192.168.1.10 dev eth0 lladdr 00:1a:2b:3c:4d:5f STALE
```
| Neighbor Information             | Explanation                                                                                     |
|----------------------------------|-------------------------------------------------------------------------------------------------|
| **192.168.1.1** | The IP address of the neighboring device.                                                      |
| **dev eth0** | Indicates that the neighbor is reachable through the `eth0` interface.                        |
| **lladdr 00:1a:2b:3c:4d:5e** | The MAC address of the neighbor device.                                                        |
| **REACHABLE** | The status of the neighbor, indicating that the device is currently reachable.                 |
| **192.168.1.10** | Another neighbor IP address.                                                                    |
| **STALE** | Indicates that the address is known but may not be reachable at the moment (e.g., it hasn't been recently confirmed). |


### 3. Display Network Information.

### `ss`
Used to display network connections, routing tables, and other network-related information.


### `ss -a`
Display all sockets, including both listening and non-listening connections.
#### Example 
```bash
ss -a
```
#### Expected output
```bash
State      Recv-Q     Send-Q         Local Address:Port         Peer Address:Port
ESTAB      0          0              192.168.1.5:22            192.168.1.10:54321
LISTEN     0          5              0.0.0.0:80                 *:*
```
| Column            | Description                                                           |
|-------------------|-----------------------------------------------------------------------|
| `State` | The current state of the socket (e.g., `ESTAB`, `LISTEN`).          |
| `Recv-Q` | The number of bytes queued for receiving.                             |
| `Send-Q` | The number of bytes queued for sending.                               |
| `Local Address:Port` | The local IP address and port number the socket is using.          |
| `Peer Address:Port` | The remote IP address and port number the socket is connected to (or `*:*` for listening sockets). |

### `ss -l`
Show only sockets that are currently listening for incoming connections. 
#### Example 
```bash
ss -l
```
#### Expected output
```bash
State      Recv-Q     Send-Q         Local Address:Port
LISTEN     0          5              0.0.0.0:80
LISTEN     0          5 [::]:22
```

### `ss -t`
Display only TCP sockets.
#### Example 
```bash
ss -t
```
#### Expected output
```bash
State      Recv-Q     Send-Q         Local Address:Port         Peer Address:Port
ESTAB      0          0              192.168.1.5:22            192.168.1.10:54321
LISTEN     0          5              0.0.0.0:80
```

> [!NOTE]
> `ip` replaces older commands like `ifconfige`.     
> `route` command has been largely replaced by the `ip route` command in modern Linux distributions, which is part of the `ip` suite. It is recommended to use `ip route` for
> new scripts or configurations.    
> `ss` command is a more modern and faster utility that provides similar functionality to `netstat`, but with additional features and better performance.

## Domain Name Server Commands
### What is the Domain Name System(DNS)?

It is the component of the internet standard protocol responsible for converting the human-friendly domain names like www.google.com into IP addresses like 142.250.72.68 that computers use to communicate. This means that using either the IP address or the hostname in your web browser will generally result in retrieving the same web page, since both point to the same server.

Linux provides several commands to query DNS information and interact with web servers. Below are the most common commands and their usage.

 ### 1. DNS Lookup with `host`
The `host` command performs DNS lookups, translating domain names to IP addresses and vice versa.
```
host google.com
```
**Sample Output:**
```
google.com has address 142.250.75.78
google.com has IPv6 address 2a00:1450:4028:805::200e
google.com mail is handled by 10 smtp.google.com.
google.com has HTTP service bindings 1 . alpn="h2,h3"
````
- **Address**: Shows the IPv4 address for the domain.
- **IPv6 address**: Shows the IPv6 address if available.
- **Mail server (MX record)**: Indicates which server handles email for the domain.
- **HTTP service bindings**: Lists supported protocols (e.g., HTTP/2, HTTP/3).


**Reverse DNS Lookup (IP to Domain):**
```
host 142.250.75.78
```
**Sample Output:**
```
78.75.250.142.in-addr.arpa domain name pointer tztlva-ab-in-f14.1e100.net.
```
- **78.75.250.142.in-addr.arpa**: This is the reverse DNS query for the IP address.
- **domain name pointer tztlva-ab-in-f14.1e100.net**: This is the PTR (pointer) record, which maps the IP address back to a domain name.
- **1e100.net**: This domain is owned by Google, indicating its IP address is part of Google’s network.

> [!NOTE]
> Reverse DNS results for large companies like Google can change frequently. You may see different pointer records depending on your location and timing.

### 2. Name Server Lookup with `nslookup`
`nslookup` is a command-line tool used to query DNS servers for information about domains or IP addresses.
```
nslookup google.com
```
**Sample Output:**
```
Server:		127.0.0.53
Address:	127.0.0.53#53

Non-authoritative answer:
Name:	google.com
Address: 142.250.75.110
Name:	google.com
Address: 2a00:1450:4028:800::200e

```
- **Server**: The DNS server your system is using.
- **Non-authoritative answer**: A valid DNS response, but not directly from the source server.
- **Name**: The domain queried.
- **Address**: The IP addresses returned for the domain (IPv4 and IPv6).


**Interactive Mode:**
```
nslookup
> set type=MX
> google.com
```
**Sample Output:**
```
Server:		127.0.0.53
Address:	127.0.0.53#53

Non-authoritative answer:
google.com	mail exchanger = 10 smtp.google.com.

Authoritative answers can be found from:
smtp.google.com	internet address = 64.233.166.27
smtp.google.com	internet address = 64.233.167.26
smtp.google.com	internet address = 74.125.71.27
smtp.google.com	internet address = 64.233.166.26
smtp.google.com	internet address = 64.233.167.27
smtp.google.com	has AAAA address = 2a00:1450:400c:c09::1a
smtp.google.com	has AAAA address = 2a00:1450:400c:c0a::1b
smtp.google.com	has AAAA address = 2a00:1450:400c:c0a::1a
smtp.google.com	has AAAA address = 2a00:1450:400c:c09::1b
```
- **google.com  mail exchanger = 10 smtp.google.com.**: MX record is an email for google.com is handled by smtp.google.com, preference value 10.
- **Authoritative answers can be found from**: Lists the real IP addresses (IPv4 and IPv6) for the mail server smtp.google.com.

>[!IMPORTANT]
> Press **Ctrl+C** to exit interactive mode.

### 3. Detailed DNS Query with `dig`
The `dig` (Domain Information Groper) command provides detailed DNS query information.
```
dig google.com
```

**Sample Output:**
```
; <<>> DiG 9.20.11-1ubuntu2-Ubuntu <<>> google.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 44070
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; ENDS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;google.com.      IN     A

;; ANSWER SECTION:
google.com.   29   IN   A   142.250.201.14

;; Query time: 80 msec
;; SERVER: 127.0.0.53#53(127.0.0.53)(UDP)
;; WHEN: Wed Oct 22 14:00:00 UTC 2025
;; MSG SIZE  rcvd: 55
```
- The first line displays the `dig` command version.
- **HEADER** section in the dig output summarizes the DNS query and response, detailing the query type, response status, and flags for key attributes. It also shows counts for questions, answers, authoritative records, and additional records in the response.
- **OPT PSEUDOSECTION** displays advanced data:
  - **EDNS**: Extension system for DNS, if used.
  - **flags**: Specified flags. In this case, it's blank because no flags were specified.
  - **udp**: udp packet size.
- **QUESTION SECTION** displays the query data that was sent:
  - The first column is the domain name queried.
  - The second column is the query type (IN = Internet).
  - The third column specifies the record (A = Address) unless otherwise specified.
- **ANSWER SECTION** the most important section:
  - The first column lists the name of the server that was queried.
  - The second column is the Time to Live, a set timeframe after which the record is refreshed.
  - The third column is the query type (IN = Internet).
  - The fourth column specifies the record (A = Address).
  - The final column displays the IP address associated with the domain name.
- The **statistics section** shows metadata about the query:
  - **Query time**: The amount of time it took for a response.
  - **SERVER**: The responding DNS server IP address and port.
  - **WHEN**: The time when the command was run.
  - **MSG SIZE rcvd**: The size of the reply from the DNS server.
>[!TIP]
> You can specify the record type (e.g., MX for mail): `dig google.com MX`


**Find Only the Answer (just the IP address):**
```
dig +short google.com 
```
```
142.250.201.14
```
## Interacting with Web Servers
When you interact with a web server, you send and receive **HTTP messages**. Each message consists of two main parts: **headers** and **body**.
- **Headers** provide metadata about the requests or responses (e.g., content type, encoding, cookies).
- The **body** contains the main content (like the HTML of a page or the binary data of a file).

### HTTP Requests

An **HTTP request** is what your computer sends to a server to request a web page, submit form data, or perform another web action.

**Components of an HTTP Request:** 
- **HTTP Method**: The action to perform, such as `GET` to retrieve data, `POST` to send data, `PUT` to update data, `DELETE` to remove data.
- **URI (Uniform Resource Identifier)**: The path or address of the resource on the server.
- **HTTP Version**: Indicates the version of the HTTP protocol (e.g., HTTP/1.1).
- **Request Headers:**: Additional information about the request, such as the user-agent, content type, cookies, and more.
- **Request Body (Optional)**: Data sent with the request, such as form fields or JSON (commonly used with `POST` or `PUT`).

### HTTP Responses

An **HTTP response** is what the server sends back after processing your request.

**Components of an HTTP Response:**
- **Status Line**: Includes the HTTP version, status code, and status message (e.g., HTTP/1.1 200 OK). The status code indicates whether the request was successful or if there was an error.
- **Response Headers**: Metadata about the response, such as content type, length, server details, and cookies.
- **Response Body(Data)**: The main content returned, such as HTML, images, JSON, or files.

### 1. Fetching Web Pages with `curl`
`curl` is a command-line tool for transferring data to or from a server, commonly used to fetch web pages or APIs.

> [!NOTE]
> You may need to install it first: `sudo apt install curl`

**Fetch a Webpage by Hostname**

To fetch the contents of a web page using its hostname:
```
curl https://www.google.com
```
- Displays the raw HTML returned by the server.

**Fetch a Webpage by IP Address**

You can also access a website by its IP address.

First, find the IP using a DNS command such as `host` or `dig`. Then use `curl` with the IP address and specify the Host header since many web servers host multiple sites.

```
curl http://142.250.201.14 -H "Host: www.google.com"
```
- The `-H` option sets the **Host** header, telling the server which website you want. If not set, you may get an error or a default page.
- This should return the same HTML output as using the hostname.

### 2. Checking HTTP Headers Only
To fetch just the HTTP headers (for debugging or information), use the `-I` option.
```
curl -I www.google.com
```
- Displays metadata about the response, including status code, headers, content type, content length, and  other server details.

### 3. Downloading Files with `curl`
You can use `curl` to download files, such as images, scripts, or documents.

**Download and Keep Original Filename**
```
curl -O http://www.google.com/image.png
```
 - The `-O` option saves the file with its original name.

**Download and Rename the File**
```
curl https://www.google.com -o google.html
```
- The `-o` option lets you specify the filename after the option.

### 4. Send Data to a Server
Websites often require users to submit data (e.g., for login forms). You can do this with `curl`.

**Send Data Directly**

Suppose a website expects two fields: username and password.
```
curl -d "username=myuser&password=mypass" https://example.com/login
```
- The `-d` option tells `curl` to send the provided string as data to the server.
- The string is formatted like a web form: field1=value1&field2=value2.

**Send Data from a File**

If you have a lot of data, you can write it in a file (e.g., data.txt) and send it like this:
```
curl -d @data.txt https://example.com/submit
```
- The `@` symbol tells `curl` to read the data from the specified file.



## Secure Shell
Secure Shell (SSH) is a network protocol that enables a client device to securely connect to a server device. It is used for remote command-line access on a server.

```
ssh localshost # connect to your device (localhost)
ssh <username>@<hostname> # connect to another device (remote server)
```
> The `<hostname>` can be an IP address or the domain name of the remote server.

**Resources**
- [SSH Concept](https://www.youtube.com/watch?v=P0Fk-K2eZF8).
- [SSH Ubuntu Documentation](https://manpages.ubuntu.com/manpages/jammy/man1/ssh.1.html).
- [SSH Tutorial, Installation and Troubleshooting ](https://www.youtube.com/watch?v=F1_fkOYgu8g).
- [SSH Tutorial, Local and Remote Connection](https://www.youtube.com/watch?v=v45p_kJV9i4&t=167s).

> [!IMPORTANT]
> [SSH Tutorial, Local and Remote Connection](https://www.youtube.com/watch?v=v45p_kJV9i4&t=167s) uses macOS but same commands can be used for linux.
